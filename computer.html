<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>利率计算器</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-siteapp"/>
  <link rel="stylesheet" href="css/amazeui.min.css">
  <link rel="stylesheet" href="css/app.css">
</head>
<body>
<div class="am-g myapp-login">
	<div class="myapp-login-logo-block">
		<div class="myapp-login-logo">
			<i class="am-icon-jsfiddle"></i>
		</div>
		<div class="myapp-login-logo-text">
			<div class="myapp-login-logo-text">
				利率<span>计算器</span>
				
				<div class="info">天下没有难算的单子--郑州刘乾多</div>
				
			</div>
		</div>
		
		<div class="am-u-sm-10 login-am-center">
	<div class="am-btn-group doc-js-btn-1" style="margin-left: 35px;" data-am-button>
  <label class="am-btn am-btn-success am-active am-btn-lg" value="1.0903" yue="36">
    <input type="radio" name="options"  id="option1" checked> 三年
  </label>
  <label class="am-btn am-btn-success am-btn-lg" value="1.065" yue="24">
    <input type="radio" name="options"  id="option2"> 两年
  </label>
  <label class="am-btn am-btn-success am-btn-lg" value="1.0358" yue="12">
    <input type="radio" name="options"  id="option3"> 一年
  </label>
</div>
			<form class="am-form">
	
				<fieldset>
					<div class="am-form-group">
						<input type="text" class="am-form-field am-radius" id="in" placeholder="输入利率">
					</div>

					<div class="am-form-group">
						<input type="text" class="am-form-field am-radius" id="dai" placeholder="贷款金额">
					</div>
					<p><button type="button" id="sum" class="am-btn am-btn-default" >计算</button></p>
				</fieldset>
				<div class="am-g">
				<p id="az"style="margin-bottom: -20px;margin-top: -30px;margin-left: 20px;"></p>
		<p id="a1" style="margin-left: 20px;"></p>
		<p id="bz"style="margin-bottom: -20px;margin-left: 20px;"></p>
		<p id="b1"style="margin-left: 20px;"></p>
		<p id="cz"style="margin-bottom: -20px;margin-left: 20px;"></p>
		<p id="c1"style="margin-left: 20px;"></p>
		<p id="dz"style="margin-bottom: -20px;margin-left: 20px;"></p>
		<p id="d1"style="margin-left: 20px;"></p>	
		</div>
			</form>
		</div>
		
	</div>
</div>

	<!--<![endif]-->
<!--[if lte IE 8 ]>
<script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/amazeui.ie8polyfill.min.js"></script>
<![endif]-->
<script src="js/jquery.min.js"></script>
<script src="js/amazeui.min.js"></script>
<script src="js/app.js"></script>
<script type="text/javascript">
/*2018.1.30 create by liuzehao qq506039293*/
function accAdd(arg1, arg2) {//加法
    var r1, r2, m, c;
    try {
        r1 = arg1.toString().split(".")[1].length;
    }
    catch (e) {
        r1 = 0;
    }
    try {
        r2 = arg2.toString().split(".")[1].length;
    }
    catch (e) {
        r2 = 0;
    }
    c = Math.abs(r1 - r2);
    m = Math.pow(10, Math.max(r1, r2));
    if (c > 0) {
        var cm = Math.pow(10, c);
        if (r1 > r2) {
            arg1 = Number(arg1.toString().replace(".", ""));
            arg2 = Number(arg2.toString().replace(".", "")) * cm;
        } else {
            arg1 = Number(arg1.toString().replace(".", "")) * cm;
            arg2 = Number(arg2.toString().replace(".", ""));
        }
    } else {
        arg1 = Number(arg1.toString().replace(".", ""));
        arg2 = Number(arg2.toString().replace(".", ""));
    }
    return (arg1 + arg2) / m;
}
function accMul(arg1, arg2) {//解决浮点乘法
    var m = 0, s1 = arg1.toString(), s2 = arg2.toString();
    try {
        m += s1.split(".")[1].length;
    }
    catch (e) {
    }
    try {
        m += s2.split(".")[1].length;
    }
    catch (e) {
    }
    return Number(s1.replace(".", "")) * Number(s2.replace(".", "")) / Math.pow(10, m);
}

function accSub(arg1, arg2) {//浮点减法
    var r1, r2, m, n;
    try {
        r1 = arg1.toString().split(".")[1].length;
    }
    catch (e) {
        r1 = 0;
    }
    try {
        r2 = arg2.toString().split(".")[1].length;
    }
    catch (e) {
        r2 = 0;
    }
    m = Math.pow(10, Math.max(r1, r2)); //last modify by deeka //动态控制精度长度
    n = (r1 >= r2) ? r1 : r2;
    return ((arg1 * m - arg2 * m) / m).toFixed(n);
}
function accDiv(arg1, arg2) {//浮点除法
    var t1 = 0, t2 = 0, r1, r2;
    try {
        t1 = arg1.toString().split(".")[1].length;
    }
    catch (e) {
    }
    try {
        t2 = arg2.toString().split(".")[1].length;
    }
    catch (e) {
    }
    with (Math) {
        r1 = Number(arg1.toString().replace(".", ""));
        r2 = Number(arg2.toString().replace(".", ""));
        return (r1 / r2) * pow(10, t2 - t1);
    }
}

$(document).ready(function(){		
$("#sum").click(function(){

var ru=1.0903;
var yue=36;
   $("label").each(function(){
      if($(this).hasClass("am-active"))
	  {
	  ru=parseFloat($(this).attr("value"));
	  yue=parseFloat($(this).attr("yue"));
	  }
    });
		var a=accAdd(2,accDiv(parseFloat($("#in").val()),100));//a是中间利差
	var temp=accSub(a,ru);
	var b=parseInt($("#dai").val());//b是贷款额度
	var f=accMul(temp,b);//分期金额精确值
	var c=(Math.ceil(accMul(temp,b)/100))*100;//c是向上取整后的中间值即总贷款额度
	
	var d=accMul(c,ru)//d是总共的本息额度
	var e=accDiv(d,yue);//e是月供
		$("#a1").html("");
		$("#b1").html("");
		$("#c1").html("");
		$("#d1").html("");
		$("#az").html("公式:");
			$("#a1").html(a+"-"+ru+"="+temp);
			$("#bz").html("分期金额:");
			$("#b1").html(b+"*"+temp+"="+f+"-->"+c);
			$("#cz").html("贷款总金额:");
			$("#c1").html(c+"*"+ru+"="+d);
			$("#dz").html("月供:");
			$("#d1").html(d+"/"+yue+"="+e);	
		
		});
	});

</script>
</body>
</html>
